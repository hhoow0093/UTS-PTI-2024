<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>punya howard</title>
    <link rel="stylesheet" href="style.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>


    <div class="container-fluid">
        <h1 id="test">Data <span id="siswa"> Mahasiswa ||</span></h1>
        <h2 id="test2"> Hello, 世界!</h2>
        <div id = "warning"></div>
        <div id = "added"></div>
        <div id = "update"></div>
        <div id = "delete"></div>


        <hr>
        <p>Usaha keras tidak akan mengkhianati hasil, tapi bisa mengkhianati impian.</p>
        <hr>

        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Show Entries:
                    <select class="form-select" id="entries" onchange="changeEntries()">
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                        <option value="20">20</option>
                    </select>
                </label>
            </div>
            <div class="col-md-6">
                <label class="form-label">Search by Name:
                    <input type="text" id="searchInput" class="form-control" oninput="searchByName()" placeholder="Enter Full Name">
                </label>
            </div>
        </div>
        
        <div class="table-responsive opacity-50">
            <table id="kotak" class="table">
                <tr>
                    <th>ID</th>
                    <th>Nomor Induk Mahasiswa</th>
                    <th>Nama Lengkap</th>
                    <th>Alamat</th>
                    <th>Pengaturan</th>
                </tr>
            </table>
            <hr style="border: black solid; background-color: black solid;">
        </div>
        

        <ul class="pagination">
          <li class="page-item"><a class="page-link" href="#" onclick="previousPage()">Previous</a></li>
          <li class="page-item"><a class="page-link" href="#" onclick="changePage(1)">1</a></li>
          <li class="page-item"><a class="page-link" href="#" onclick="changePage(2)">2</a></li>
          <li class="page-item"><a class="page-link" href="#" onclick="changePage(3)">3</a></li>
          <li class="page-item"><a class="page-link" href="#" onclick="nextPage()">Next</a></li>
        </ul>

        <form id="addForm">
          <div class="row">
              <div class="col-md-12">
                  <div class="row">
                      <div class="col-md-4">
                          <div class="form-group">
                              <label for="nim" class="col-md-4-form-label" style="color: aliceblue; background-color: rgba(0, 0, 0, 0.5);padding: 10px;">NIM:</label>
                          </div>
                      </div>
                      <div class="col-md-8">
                          <div class="form-group">
                              <input type="text" id="nim" name="nim" class="form-control" placeholder="Nomor Induk Mahasiswa" pattern="\d*" required>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md-4">
                          <div class="form-group">
                              <label for="name" class="col-md-4-form-label" style="color: aliceblue; background-color: rgba(0, 0, 0, 0.5);padding: 10px;">Nama Lengkap:</label>
                          </div>
                      </div>
                      <div class="col-md-8">
                          <div class="form-group">
                              <input type="text" id="name" name="name" class="form-control" placeholder="Nama Lengkap" required>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md-4">
                          <div class="form-group">
                              <label for="alamat" class="col-md-4-form-label" style="color: aliceblue;  background-color: rgba(0, 0, 0, 0.5); padding: 10px;">Alamat:</label>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="form-group">
                                <input type="text" id="alamat" name="alamat" class="form-control" placeholder="Alamat Tempat Tinggal Asal" required>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div class="col-md-12 text-right">
                      <button type="button" class="btn btn-warning" onclick="resetForm()"><span style="font-weight: bold; ">&#8634;</span> Reset</button>
                      <button type="button" class="btn btn-success" onclick="addRow()"><span class="plus-symbol" style="color: white;"> + </span> Tambah</button>
                  </div>
              </div>
          </form>
    
            <div id="myModal" class="modal">
                <div id="modal-content" class="modal-content">
                    <span class="close">&times;</span>
                    <label for="newName">Nama:</label>
                    <input type="text" id="newName" class="form-control" placeholder="Nama Lengkap" required>
                    <label for="newNim">Nomor Induk Mahasiswa:</label>
                    <input type="text" id="newNim" class="form-control" placeholder = "NIM Mahasiswa" disabled>
                    <label for="newAlamat">Alamat baru:</label>
                    <input type="text" id="newAlamat" class="form-control" placeholder="Alamat Tempat Tinggal Asal" required>
                    <div>
                        <button id="updateBtn" class="btn btn-success">Update</button>
                        <button id="tutup" class="btn btn-danger">Cancel</button>
                    </div>
                </div>
            </div>
    
            <div id="clock" style="position: absolute; top: 15px; right: 15px;"></div> 
        </div>
    
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
        <script>
        var counter = 0; 
        function displayTime() {
          var currentTime = new Date();
          var hours = currentTime.getHours();
          var minutes = currentTime.getMinutes();
          var seconds = currentTime.getSeconds();
        
          hours = (hours < 10 ? "0" : "") + hours;
          minutes = (minutes < 10 ? "0" : "") + minutes;
          seconds = (seconds < 10 ? "0" : "") + seconds;
        
          var timeString = hours + ":" + minutes + ":" + seconds;
        
          document.getElementById("clock").innerText = timeString;
          
        }
        
        setInterval(displayTime, 1000);
        
        displayTime();
    
        const table = document.getElementById('kotak');
        const addForm = document.getElementById('addForm');
    
        var currentPage = 1;
        var rowsPerPage = 5;
        var selectedEntries = 5; // Default value for selected entries per page
        
        function displayRows() {
            const rows = document.querySelectorAll('#kotak tr');
            const start = (currentPage - 1) * selectedEntries + 1;
            const end = currentPage * selectedEntries + 1;
    
            for (let i = 1; i < rows.length; i++) {
                if (i >= start && i < end) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }
    
        function changePage(pageNumber) {
            currentPage = pageNumber;
            displayRows();
        }
    
        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                displayRows();
            }
        }
    
        function nextPage() {
            const totalRows = document.querySelectorAll('#kotak tr').length - 1;
            const totalPages = Math.ceil(totalRows / selectedEntries);
    
            if (currentPage < totalPages) {
                currentPage++;
                displayRows();
            }
        }
    
        function changeEntries() {
            selectedEntries = document.getElementById('entries').value;
            currentPage = 1; // Reset current page to 1 when changing entries
            displayRows();
        }
    
        function addRow() {
      const nim = document.getElementById('nim').value;
      const name = document.getElementById('name').value;
      const alamat = document.getElementById('alamat').value;
      if (nim === '' || name === '' || alamat === '') {
          const warningContainer = document.getElementById('warning');
          warningContainer.innerHTML =
              `<div class="alert alert-warning alert-white rounded" style="width: 30%;">
                  <i class="fa fa-warning"></i>
                  <strong>Warning!</strong> 
                  <div class="haha">Data Mahasiswa Tidak dapat ditambahkan!</div>
              </div>`;
  
          warningContainer.classList.add('show');
  
          setTimeout(function() {
              warningContainer.classList.add('fade-out');
  
              warningContainer.addEventListener('animationend', function() {
                  warningContainer.innerHTML = '';
                  warningContainer.classList.remove('fade-out');
              });
          }, 2000);
          return;
      }
  
      const totalRows = document.querySelectorAll('#kotak tr').length - 1;
      const totalPages = Math.ceil((counter + 1) / selectedEntries);
  
      if (totalPages > currentPage && totalRows === currentPage * selectedEntries) {
          changePage(totalPages + 1);
      }
  
      const newRow = `<tr><td>${counter + 1}</td><td>${nim}</td><td>${name}</td><td>${alamat}</td><td><button class="edit-button btn btn-primary">✎ Edit</button><button class="delete-button btn btn-danger">🗑️ Delete</button></td></tr>`;
  
      table.innerHTML += newRow;
  
      counter++;
  
      const successContainer = document.getElementById('added');
      successContainer.innerHTML =
          `<div class="alert alert-success alert-white rounded" style="width: 30%;">
              <i class="fa fa-check"></i>
              <strong>Success!</strong> 
              <div class="haha">Data Mahasiswa dapat ditambahkan!</div>
          </div>`;
  
      successContainer.classList.add('show');
  
      setTimeout(function() {
          successContainer.classList.add('fade-out');
  
          successContainer.addEventListener('animationend', function() {
              successContainer.innerHTML = '';
              successContainer.classList.remove('fade-out');
          });
      }, 2000);
  
      addForm.reset();
  }
  
  
  var modal = document.getElementById("myModal");
  var span = document.getElementsByClassName("close")[0];
  
  span.onclick = function() {
    modal.style.display = "none";
};

function updateIDs() {
    const rows = table.querySelectorAll('tr');
    for (let i = 1; i < rows.length; i++) {
        rows[i].cells[0].textContent = i;
    }
}

table.addEventListener('click', function(event) {
    if (event.target.classList.contains('edit-button')) {
        const row = event.target.parentNode.parentNode;
        const cells = row.getElementsByTagName('td');
        const newName = document.getElementById('newName');
        const newNim = document.getElementById('newNim');
        const newAlamat = document.getElementById('newAlamat');
        newNim.value = cells[1].innerText;
        newName.value = cells[2].innerText;
        newAlamat.value = cells[3].innerText;
        modal.style.display = "block";
    }  else if (event.target.classList.contains('delete-button')) {
        const row = event.target.parentNode.parentNode;
        const nimToDelete = row.getElementsByTagName('td')[1].innerText;
        row.remove();
        counter--;

        // Perbarui ID setelah baris dihapus
        updateIDs();

        const deleteContainer = document.getElementById('delete');
        deleteContainer.innerHTML = `<div class="alert alert-danger alert-white rounded"  style="width: 30%;">
                                        <i class="fa fa-times-circle"></i>
                                        <strong>Delete!</strong> 
                                        <div>Data Mahasiswa dengan NIM ${nimToDelete} telah dihapus!</div>
                                    </div>`;
        deleteContainer.classList.add('show');

        setTimeout(function() {
            deleteContainer.classList.add('fade-out');
            
            deleteContainer.addEventListener('animationend', function() {
                deleteContainer.innerHTML = '';
                deleteContainer.classList.remove('fade-out');
            });
        }, 2000);
    }

    addForm.reset();
});


function searchByName() {
    const input = document.getElementById('searchInput').value.toUpperCase();
    const rows = table.getElementsByTagName('tr');
    for (let i = 1; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        const name = cells[2].innerText.toUpperCase();
        if (name.indexOf(input) > -1) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }
    }
}

function resetForm(){
    const rows = document.querySelectorAll('#kotak tr');
    for(let i = 1; i < rows.length; i++) {
        rows[i].remove();
    }
    counter = 0;
}

document.getElementById('updateBtn').addEventListener('click', function() {
    const newName = document.getElementById('newName').value;
    const newAlamat = document.getElementById('newAlamat').value;
    const nimToUpdate = document.getElementById('newNim').value;

    // Temukan baris yang sesuai dalam tabel
    const rows = table.getElementsByTagName('tr');
    for (let i = 1; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        if (cells[1].innerText === nimToUpdate) {
            // Perbarui nilai nama dan alamat pada baris yang sesuai
            cells[2].innerText = newName;
            cells[3].innerText = newAlamat;
            break;
        }
    }
    modal.style.display = "none";

    const successContainer = document.getElementById('update');
    successContainer.innerHTML =
        `<div class="alert alert-success alert-white rounded" style="width: 30%;">
            <i class="fa fa-check"></i>
            <strong>Success!</strong> 
            <div class="haha">Data Mahasiswa diperbarui!</div>
        </div>`;

    successContainer.classList.add('show');

    setTimeout(function() {
        successContainer.classList.add('fade-out');

        successContainer.addEventListener('animationend', function() {
            successContainer.innerHTML = '';
            successContainer.classList.remove('fade-out');
        });
    }, 2000);
});


document.getElementById('tutup').addEventListener('click', function() {
    modal.style.display = "none";
});


</script>

</body>
</html>

  
